---
title: Dynamic Programming (3)
date: 2019-08-27 19:03:44
tags: 
    - math
    - DP
mathjax: true
---
本篇接上一篇 [DP2](2019/08/14/DP2) 讨论各种 DP 问题模型。

## 流水作业问题 FLOWSHOP
这是一个进程调度问题，每个进程有两个任务 A 和 B，B 必须在 A 完成之后才能执行。任务置于独立的处理器上执行，选择进程执行顺序，使得总执行时间（损失）最小。注意，A B 任务顺序与进程顺序一致。例如，有进程 $i=\{0,1,2,3\}$，且 A 任务的执行时间分别为 $p_i=\{3,4,8,10\}$，B 任务的执行时间分别为 $q_i=\{6,2,9,15\}$，如果选择进程执行顺序为 $0,1,2,3$，那么各任务执行的开始时间和结束时间如下表：

| processor 1 | $A_0: 0-3$ | $A_1:3-7$ | $A_2:7-15$ | $A_3:15-25$ | |
|:---------:|:--------:| :-----------: | :-------:  | :--------:  |:--:|
| __processor 2__  |  |$B_0: 3-9$ | $B_1:9-11$ | $B_2:15-24$ | $B_3:25-40$ |

总执行时间为最后一个 B 任务的结束时间，这个例子中为 40。进程执行顺序是可变的，要寻找具有最小执行时间的进程顺序，可以使用 DP 解决。每次决策 d 表示选择某个进程，定义状态为 (k,S)，其中 k 表示最近调度的进程的 A B 任务结束时间之间的差，S 为剩余的未调度进程集合。初始时（尚未做任何决策）k 为 0。如果当前决策 d 满足 $k \le p_d$，那么 $B_d$ 任务的执行将不会有延时，也就是说 $A_d$ 执行完了立马执行 $B_d$ 任务，__于是下一决策的 k' 为 $q_d$__，否则的话 $B_d$ 任务 在 $A_d$ 执行完了还需要延时 $k-p_d$ 才开始执行，这就导致下一决策 k' 为  $k-p_d+q_d$。

例如上面例子中，初始时 k = 0，在第一次决策 $d_1=0$ 时，$k=0<p_0$，于是 $B_0$ 任务没有延时，紧接着 $A_0$ 完成后就开始执行，然后下一决策 $d_2=1$ 的 k 为 $q_0=6$，又因为此时 $k>p_1$，所以 $B_1$ 延时 $k-p_1=6-4=2$ 才开始执行，从上表中也可以看出，$B_1$ 从 $A_1$ 结束时间 7 时开始延时 2 时间才开始执行，于是下一决策 $d_3=2$ 对应的 k 为 $k:=k-p_1+q_1=6-4+2=4$，此时 $k<p_2$，所以 $B_2$ 任务执行没有延时，紧接着 $A_2$ 结束之后就（在时间 15 时）开始执行，于是最后决策 $d_4=3$ 对应的 k 为 $k:=q_2=9$，此时 $k<p_3$，这说明 $B_3$ 任务也没有延时，紧接着 $A_3$ 结束（在 25 时）就开始执行，下一决策对应的 k 为 $k=q_3=15$，由于此时决策空间已经为空，所以决策结束，此为基本条件，即 $f(k,S)=k  \ 当 S=\emptyset$。

DPFE 为
$$f(k,S)=\min_{d \in S} \{p_d + f(\max (k-p_d,0)+q_d, S-\{d\})\}$$
终止条件为 $f(k,\emptyset)=k$。要求的目标为 $f(0,S^{\ast})$，$S^{\ast}$ 为初始进程集合。
